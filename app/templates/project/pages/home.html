<workspace-header class="workspace-header" ng-init="currentPage='3'"></workspace-header>

<div class="page-header margin-bottom-35">

    <md-toolbar>
      <div layout="row" layout-align="start center">
        <h2><a href="/project.php#/{{projectCtrl.projectData.id}}/home">{{projectCtrl.projectData.title}}</a></h2>
        <span flex></span>

        <!-- ng-if="!isPreview && projectCtrl.projectData.isPublic && projectCtrl.projectData.requiresAdminApprovalToJoin && $root.userData.accountId === projectCtrl.projectData.projectManagerId" -->
        <a
           ng-href="{{'/project.php#/'+projectCtrl.projectData.id+'/requests'}}"
           class="link-button uppercase edit-button margin-left20">
            <ng-md-icon icon="person_add" size="18"></ng-md-icon>Manage Join Requests
        </a>
        <a ng-if="!isPreview && ($root.userData.accountId === projectCtrl.projectData.projectManagerId || $root.userData.isDmdiiAdmin)"
           ng-href="{{'/project.php#/'+projectCtrl.projectData.id+'/edit'}}"
           class="link-button uppercase edit-button margin-left20">
            <ng-md-icon icon="edit" size="18"></ng-md-icon>Edit
        </a>
        <!-- ng-if="isSubmission"  -->
        <a
          class="link-button uppercase edit-button margin-left20"
          ng-href="/project.php#/submit/{{projectCtrl.projectData.id}}">
          <ng-md-icon icon="send" size="18"></ng-md-icon> Submit
        </a>
      </div>
    </md-toolbar>






    <div class="container project-page-container">

        <md-tabs md-dynamic-height md-border-bottom>
          <md-tab ng-repeat="p in pages" label="{{p.title}}"
            ng-attr-md-selected="{{true}}"
          >
          </md-tab>
        </md-tabs>

        <!-- <md-button ng-repeat="p in pages"
                   ui-sref="{{p.state}}"
                   ng-click="openPage()"
                   ng-class="{'selected' : p.id === currentPage}">
          <ng-md-icon icon="{{p.icon}}" size="18"></ng-md-icon>
          <div class="dmc-project-subnav-dialog-btn__caption">
            {{p.title}}
          </div>
        </md-button> -->


    </div>


</div>
<div class="container project-page-container">
    <div layout="row" >
        <!-- Left Content Column -->
        <div class="content-column" layout="column" flex="65">
            <!-- Overview -->
            <div class="content-panel margin-right12-5">
                <div class="content-panel-header">
                    <md-toolbar>
                        <h2>OVERVIEW</h2>
                        <span style="font-size:10px">Workspace Creator: {{projectCtrl.projectData.projectManager}}</span>
                    </md-toolbar>
                </div>
                <div class="content-panel-body">
                    <md-content layout="row">
                        <div flex="25" style="display: none">
                            <img ng-src="{{projectCtrl.projectData.featureImage.thumbnail}}">
                        </div>
                        <div flex>
                            <p class="project-description" markdown-to-html="projectCtrl.projectData.description"></p>
                        </div>
                    </md-content>
                </div>
            </div>
            <!-- Requirement Documents -->
            <div ng-if="isPreview" class="content-panel margin-top-25 margin-right12-5"
                 ui-widget-documents
                 project-id="projectCtrl.currentProjectId"
                 widget-title="'DOCUMENTS'"></div>
            <!-- Discussion -->
            <div ng-if="!isPreview" class="content-panel margin-right12-5 margin-top-25"
                 ui-widget-discussions project-id="projectCtrl.currentProjectId"
                 widget-title="'DISCUSSIONS'"></div>
            <!-- Tasks -->
            <div ng-if="!isPreview" class="content-panel margin-right12-5 margin-top-25"
                 ui-widget-tasks project-id="projectCtrl.currentProjectId"
                 columns="['title','assignee','dueDate','priority']"
                 widget-title="'TASKS'" show-task-modal="showTaskModal"></div>
        </div>
        <!-- Right Content Column -->
        <div class="content-column" layout="column" flex>
            <!-- Project tags -->
            <div class="content-panel margin-left12-5"
                 ui-widget-project-tags
                 tags="projectCtrl.projectData.tags"
                 widget-title="'TAGS'"></div>
            <!-- Running Services -->
            <div ng-if="!isPreview" class="content-panel margin-left12-5 margin-top-25"
                 ui-widget-services
                 view-all-href="'https://test.projectdmc.org/services/?group_id=7'"
                 title-href="'https://test.projectdmc.org/services/index.php?group_id=7&diid=4'"
                 project-id="projectCtrl.currentProjectId"
                 widget-title="'SERVICES'"
                 limit="5"
                 columns="['name','status']"></div>
            <!-- Components -->
            <!--<div ng-if="!isPreview" class="content-panel project-review" ui-widget-components project-id="projectCtrl.currentProjectId" widget-title="'COMPONENTS'" columns="['name']"></div>-->
        </div>
    </div>
</div>
